




<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="lt-ie9 no-js"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="profile" href="http://gmpg.org/xfn/11">
  <link rel="pingback" href="https://www.turing.ac.uk/xmlrpc.php">

  <script src="//use.typekit.net/vul4hnx.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>

    <!--[if (gte IE 6)&(lte IE 8)]>
  <script type="text/javascript" src="https://www.turing.ac.uk/wp-content/themes/ati/assets/js/selectivizr/selectivizr-min.js"></script>
  <noscript><link rel="stylesheet" href="https://www.turing.ac.uk/wp-content/themes/ati/style.css" /></noscript>
  <![endif]-->
  <title>Iterators, Generators, Decorators, and Contexts</title>

  <!-- This site is optimized with the Yoast SEO plugin v4.8 - https://yoast.com/wordpress/plugins/seo/ -->
  <link rel="canonical" href="" />
  <meta property="og:locale" content="en_GB" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Iterators, Generators, Decorators, and Contexts" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="https://www.turing.ac.uk/news/cray-provide-cray-urika-gx-system-alan-turing-institute/" />
  <meta property="og:site_name" content="The Alan Turing Institute" />
  <meta property="article:section" content="News" />
  <meta property="article:published_time" content="2017-07-13T09:10:42+01:00" />
  <meta property="og:image" content="https://aticdn.s3-eu-west-1.amazonaws.com/2017/07/1865_RW_Location_39-300x200.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:title" content="Iterators, Generators, Decorators, and Contexts" />
  <meta name="twitter:image" content="https://aticdn.s3-eu-west-1.amazonaws.com/2017/07/1865_RW_Location_39-300x200.jpg" />
  <!-- / Yoast SEO plugin. -->

  <link rel='dns-prefetch' href='//www.turing.ac.uk' />
  <link rel='dns-prefetch' href='//ajax.googleapis.com' />
  <link rel='dns-prefetch' href='//s.w.org' />
  <link rel="alternate" type="application/rss+xml" title="The Alan Turing Institute &raquo; Feed" href="https://www.turing.ac.uk/feed/" />
    <script type="text/javascript">
      window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.turing.ac.uk\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.5"}};
      !function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
    </script>
    <style type="text/css">
      img.wp-smiley,
      img.emoji {
        display: inline !important;
        border: none !important;
        box-shadow: none !important;
        height: 1em !important;
        width: 1em !important;
        margin: 0 .07em !important;
        vertical-align: -0.1em !important;
        background: none !important;
        padding: 0 !important;
      }
    </style>

  <link href="/rsd-engineeringcourse/css/screen.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/rsd-engineeringcourse/css/jekyll-styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/local_styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/ipython.css" rel="stylesheet" type="text/css">

  <link rel='stylesheet' id='some_like_it_neat-style-css'  href='/rsd-engineeringcourse/ati_css/style.css' type='text/css' />

  <link rel="shortcut icon" href="/rsd-engineeringcourse/images/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/rsd-engineeringcourse/favicon-152.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/rsd-engineeringcourse/favicon-144.png">

  <script src="/rsd-engineeringcourse/js/lib/modernizr-custom.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    <script>
      var cuttingTheMustard = document.querySelector && window.localStorage && window.addEventListener;

      Modernizr.load({
        //cutting the mustard as used by the BBC
        test: cuttingTheMustard
        //if old browser load the shiv
        ,
        nope: [
          '/rsd-engineeringcourse/js/lib/html5shiv-printshiv.min.js', '/rsd-engineeringcourse/js/lib/respond.min.js'
        ]
      });
      //set conditional assets for main.js
      var globalSiteSpecificVars = {
        pathToJquery: "/rsd-engineeringcourse/js/lib/jquery-1.9.1.min",
        googleAnalyticsIdsArray: [] //specify array of site specific id's NOT UCL generic UA-943297-1
      }
      if (cuttingTheMustard) {
        globalSiteSpecificVars.pathToJquery = '/rsd-engineeringcourse/js/lib/jquery-2.1.1.min';
      }
    </script>
    <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
    <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

  <link rel='shortlink' href='https://www.turing.ac.uk/?p=9266' />

        <style>
          .menu-button i.navicon {
            display: none;
          }
        </style>

  <!--
      Plugin: Super Simple Google Analytics
  Plugin URL: Super Simple Google Analytics

  -->

  <script type="text/javascript">
    window.google_analytics_uacct = "UA-87633703-1";
  </script>

</head>

<body id="index" class="layout-vertical layout-vertical--nav-1col">

  <header class="header header--desktop">

  <a class="header__close" href="#">
    <img src="/rsd-engineeringcourse/images/close.png" class="lazy" data-src="//static.ucl.ac.uk/indigo/images/close.png" alt="X" />Close</a>

  <!-- <header id="masthead" class="page-header" role="banner">

      <a class="logo-box" href='https://www.turing.ac.uk'></a>
      <div class="topbox">

  </header> -->

  <div class="wrapper">

    <div class="photograph">
  <div class="brand">
    <!-- <p class="brand__heading">Research Software Engineering with Python</p>
    <a href="/" class="brand__link"><span class="visually-hidden">Home</span></a> -->
    <img src="/rsd-engineeringcourse/img/header_polygon_2400_320.png" data-src="/rsd-engineeringcourse/img/header_polygon_2400_320.png" alt="Turing logo" id="logo" class="brand__logo lazy" href="/rsd-engineeringcourse/">  
  </div>
</div>
 

    <div class="sidebar">

      <nav class="nav nav--mobile">
        <ul>
          




        </ul>
      </nav>

      <nav class="nav nav--left">
        <ul>
          <li><a href="/rsd-engineeringcourse/">Home</a></li>


 <li class="active"> <a href="/rsd-engineeringcourse/ch00python/">Introduction to Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/00pythons.html">Many kinds of Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/010exemplar.html">An example program</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/015variables.html">Variables</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/016using_functions.html">Using Functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/023types.html">Types</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/025containers.html">Containers</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/028dictionaries.html">Dictionaries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/029structures.html">Structures</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/030MazeSolution.html">Maze Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/032conditionality.html">Conditionality</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/035looping.html">Looping</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/036MazeSolution2.html">Maze Control Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/037comprehensions.html">Comprehensions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/038SolutionComprehension.html">Maze comprehension solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/040functions.html">Defining functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/050import.html">Modules</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/101Classes.html">Classes</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch01data/">Research Data in Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/060files.html">Working with files</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/061internet.html">Internet</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/062csv.html">CSV</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/064JsonYamlXML.html">Structured Datafiles</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/065MazeSaved.html">Maze Files Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/066QuakeExercise.html">Earthquakes Exercise</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/068QuakesSolution.html">Quakes Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/072plotting.html">Plotting</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/082NumPy.html">Numerical Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/084Boids.html">The Boids</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/110Capstone.html">Understanding the Exemplar</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch02git/">Version Control</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/01Intro.html">Introduction to Version Control</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/02Solo.html">Solo Git</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/03Mistakes.html">Fixing Mistakes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/04Publishing.html">Publishing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/05Collaboration.html">Collaboration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/06ForkAndPull.html">Fork and Pull</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/09GitTheory.html">Git Theory</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/10Branches.html">Branches</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/11Miscellany.html">Git miscellany</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/12Remotes.html">Remotes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/13Rebase.html">Rebase</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/14Bisect.html">Bisect</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch03tests/">Testing</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/01testingbasics.html">Testing Basics</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/02SaskatchewanFields.html">The Fields of Saskatchewan</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/03pytest.html">Test Frameworks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/04EnergyExample.html">Energy Example</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/05Mocks.html">Mocks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/06Debugger.html">Debugger</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/07CI.html">Continuous Integration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/08DiffusionExample.html">Diffusion Example</a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch04packaging/">Software Projects</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/01Installation.html">Installing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/02Libraries.html">Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/03Argparse.html">Argparse</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/04WritingLibraries.html">Writing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/05Packaging.html">Packaging</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/06Documentation.html">Documentation</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/07Process.html">Agile and Waterfall</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/08Licensing.html">Licensing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/09Issues.html">Issue Tracking</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch05construction/">Construction and Design</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/01introduction.html">Construction</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/02conventions.html">Coding Conventions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/03comments.html">Comments</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/05refactoring.html">Refactoring</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/06objects.html">Object Refactorings</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/08objects.html">Object Oriented Design</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/09patterns.html">Design Patterns</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/10boids.html">Exercise - Boids</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/">Advanced Programming Techniques</a><ul> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/01intro.html">Don't Repeat Yourself</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/020Functional.html">Functional Programming</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/025Iterators.html">Iterators, Generators, Decorators, and Contexts</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/040Exceptions.html">Exceptions</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/049Operators.html">Operator Overloading</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/050OperatorsExample.html">Operator Overloading (example)</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/060Metaprogramming.html">Metaprogramming</a> </li></ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch08performance/">Programming for Speed</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/010intro.html">Two Mandelbrots</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/015mandels.html">Faster Mandelbrots?</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/020numpy.html">NumPy</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/040cython.html">Cython</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch08performance/050scaling.html">Scaling</a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch09fileformats/">Scientific file formats</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/07SerialisationAndNormalisation.html">Serialisation and normalisation</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/08Deserialisation.html">Deserialisation</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/09DSLs.html">Domain specific languages</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/10MarkupLanguages.html">Markup languages</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/11ControlledVocabularies.html">Controlled vocabularies</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch09fileformats/12SemanticModels.html">Semantic models</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch98rubrics/">Assessment</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/Assessment1.html">Packaging Greengraph</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/Assessment2.html">Refactoring the Bad Boids</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/PackagingTreasure.html"></a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch98rubrics/RefactoringTrees.html"></a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/session99/">Installation</a><ul><li class="inactive"> <a href="/rsd-engineeringcourse/session99/linux.html">Linux</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/mac.html">Mac OSX</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/windows.html">Windows</a> </li></ul> </li> 

        </ul>
      </nav>

    </div>
    <!-- end .sidebar -->

    <nav class="nav nav--top">
      <ul>
        
      </ul>
    </nav>

  </div>
  <!-- end .wrapper -->

  </header>
  <!-- end .header -->

  <div class="site-content wrapper">

    <header class="header header--mobile default-header">
      <a class="header__open" href="#">
        <img src="/rsd-engineeringcourse/images/ucl-menu.svg" alt="Menu" />
      </a>
    </header>

    <div class="site-content__inner clearfix">
      <div class="site-content__body">

          
            <nav class="breadcrumb clearfix">
              <ul class="breadcrumb__list">
                <!-- <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/">UCL</a></li>
 
<li class="breadcrumb__item"><a href="/rsd-engineeringcourse/">Research Software Engineering with Python</a></li>
-->



              </ul>
            </nav>
           <div class="site-content__main">
            
               <div id="slidelink">
                 <a href="/rsd-engineeringcourse/ch07dry/025Iterators.ipynb">Notebook download</a>
               </div>
            
            
          
          

    <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Iterators-and-Generators">Iterators and Generators<a class="anchor-link" href="#Iterators-and-Generators">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In Python, anything which can be iterated over is called an iterable:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bowl</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;apple&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;banana&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;orange&quot;</span><span class="p">:</span> <span class="mi">7</span>
<span class="p">}</span>

<span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">bowl</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fruit</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>APPLE
BANANA
ORANGE
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Surprisingly often, we want to iterate over something that takes a moderately
large amount of memory to store - for example, our map images in the
green-graph example.</p>
<p>Our green-graph example involved making an array of all the maps between London
and Birmingham. This kept them all in memory <em>at the same time</em>: first we
downloaded all the maps, then we counted the green pixels in each of them.</p>
<p>This would NOT work if we used more points: eventually, we would run out of memory.
We need to use a <strong>generator</strong> instead. This chapter will look at iterators and generators in more detail:
how they work, when to use them, how to create our own.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Iterators">Iterators<a class="anchor-link" href="#Iterators">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Consider the basic python <code>range</code> function:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>range(0, 10)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)):</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">x</span>

<span class="n">total</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>499999500000</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to avoid allocating a million integers, <code>range</code> actually uses an <strong>iterator</strong>.</p>
<p>We don't actually need a million integers <em>at once</em>, just each
integer <em>in turn</em> up to a million.</p>
<p>Because we can get an iterator from it, we say that a range is an <strong>iterable</strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So we can <code>for</code>-loop over it:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0
1
2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are two important Python built-in functions for working with iterables.
First is <code>iter</code>, which lets us create an iterator from any iterable object.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once we have an iterator object, we can pass it to the <code>next</code> function. This
moves the iterator forward, and gives us its next element:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When we are out of elements, a <code>StopIteration</code> exception is raised:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">StopIteration</span>                             Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-9-15841f3f11d4&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>next<span class="ansi-blue-fg">(</span>a<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">StopIteration</span>: </pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This tells Python that the iteration is over. For example, if we are in a <code>for i in range(3)</code> loop, this lets us know when we should exit the loop.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can turn an iterable or iterator into a list with the <code>list</code> constructor function:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[0, 1, 2, 3, 4]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Defining-Our-Own-Iterable">Defining Our Own Iterable<a class="anchor-link" href="#Defining-Our-Own-Iterable">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When we write <code>next(a)</code>, under the hood Python tries to call the <code>__next__()</code> method of <code>a</code>. Similarly, <code>iter(a)</code> calls <code>a.__iter__()</code>.</p>
<p>We can make our own iterators by defining <em>classes</em> that can be used with the <code>next()</code> and <code>iter()</code> functions: this is the <strong>iterator protocol</strong>.</p>
<p>For each of the <em>concepts</em> in Python, like sequence, container, iterable, the language defines a <em>protocol</em>, a set of methods a class must implement, in order to be treated as a member of that concept.</p>
<p>To define an iterator, the methods that must be supported are <code>__next__()</code> and <code>__iter__()</code>.</p>
<p><code>__next__()</code> must update the iterator.</p>
<p>We'll see why we need to define <code>__iter__</code> in a moment.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here is an example of defining a custom iterator class:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">fib_iterator</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;An iterator over part of the Fibonacci sequence.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">seed1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed2</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">seed1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">seed2</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">fib_iterator</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>3</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>5</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>8</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">fib_iterator</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2
3
5
8
13
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">fib_iterator</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>297924218508143360336882819981631900915673130543819759032778173440536722190488904520034508163846345539055096533885943242814978469042830417586260359446115245634668393210192357419233828310479227982326069668668250</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-shortcut-to-iterables:-the-__iter__-method">A shortcut to iterables: the <code>__iter__</code> method<a class="anchor-link" href="#A-shortcut-to-iterables:-the-__iter__-method">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In fact,  we don't always have to define both <code>__iter__</code> and <code>__next__</code>!</p>
<p>If, to be iterated over, a class just wants to behave as if it were some other iterable, you can just implement <code>__iter__</code> and return <code>iter(some_other_iterable)</code>, without implementing <code>next</code>.  For example, an image class might want to implement some metadata, but behave just as if it were just a 1-d pixel array when being iterated:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>


<span class="k">class</span> <span class="nc">MyImage</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixels</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return an iterator over just the pixel values</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]]]</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">MyImage</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">channels</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>3</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">webcolors</span> <span class="kn">import</span> <span class="n">rgb_to_name</span>
<span class="k">for</span> <span class="n">pixel</span> <span class="ow">in</span> <span class="n">image</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rgb_to_name</span><span class="p">(</span><span class="n">pixel</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>yellow
lime
blue
white
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>See how we used <code>image</code> in a <code>for</code> loop, even though it doesn't satisfy the iterator protocol (we didn't define both <code>__iter__</code> and <code>__next__</code> for it)?</p>
<p>The key here is that we can use any <em>iterable</em> object (like <code>image</code>) in a <code>for</code> expression,
not just iterators! Internally, Python will create an iterator from the iterable (by calling its <code>__iter__</code> method), but this means we don't need to define a <code>__next__</code> method explicitly.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <em>iterator</em> protocol is to implement both <code>__iter__</code> and
<code>__next__</code>, while the <em>iterable</em> protocol is to implement <code>__iter__</code> and return
an iterator.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Generators">Generators<a class="anchor-link" href="#Generators">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There's a fair amount of "boiler-plate" in the above class-based definition of
an iterable.</p>
<p>Python provides another way to specify something
which meets the iterator protocol: <strong>generators</strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">my_generator</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">5</span>
    <span class="k">yield</span> <span class="mi">10</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">my_generator</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>5</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">StopIteration</span>                             Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-26-92de4e9f6b1e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>next<span class="ansi-blue-fg">(</span>x<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">StopIteration</span>: </pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">my_generator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>5
10
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">my_generator</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>15</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A function which has <code>yield</code> statements instead of a <code>return</code> statement returns
<strong>temporarily</strong>: it automagically becomes something which implements <code>__next__</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each call of <code>next()</code> returns control to the function where it
left off.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Control passes back-and-forth between the generator and the caller.
Our Fibonacci example therefore becomes a function rather than a class.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">yield_fibs</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">seed1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed2</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">current</span> <span class="o">=</span> <span class="n">seed1</span>
    <span class="n">previous</span> <span class="o">=</span> <span class="n">seed2</span>

    <span class="k">while</span> <span class="n">limit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">limit</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">current</span><span class="p">,</span> <span class="n">previous</span> <span class="o">=</span> <span class="n">current</span> <span class="o">+</span> <span class="n">previous</span><span class="p">,</span> <span class="n">current</span>
        <span class="k">yield</span> <span class="n">current</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can now use the output of the function like a normal iterable:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">yield_fibs</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>31</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">yield_fibs</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2
8
34
144
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sometimes we may need to gather all values from a generator into a list, such as before passing them to a function that expects a list:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">yield_fibs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[2, 3, 5, 8, 13, 21, 34, 55, 89, 144]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">yield_fibs</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;matplotlib.lines.Line2D at 0x7f8bfa37ba90&gt;]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Related-Concepts">Related Concepts<a class="anchor-link" href="#Related-Concepts">&#182;</a></h2><p>Iterables and generators can be used to achieve complex behaviour, especially when combined with functional programming. In fact, Python itself contains some very useful language features that make use of these practices: context managers and decorators. We have already seen these in this class, but here we discuss them in more detail.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Context-managers">Context managers<a class="anchor-link" href="#Context-managers">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="../ch01data/060files.html#Closing-files">We have seen before</a> [<a href="../ch01data/060files.ipynb#Closing-files">notebook</a>] that, instead of separately <code>open</code>ing and <code>close</code>ing a file, we can have
the file be automatically closed using a context manager:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> example.yaml
<span class="n">modelname</span><span class="p">:</span> <span class="n">brilliant</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing example.yaml
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">yaml</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.yaml&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">foo</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;modelname&#39;: &#39;brilliant&#39;}
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>&lt;ipython-input-35-ad1cb4692b5d&gt;:4: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  print(yaml.load(foo))
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In addition to more convenient syntax, this takes care of any clean-up that has to be done after the file is closed, even if any errors occur while we are working on the file.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>How could we define our own one of these, if we too have clean-up code we
always want to run after a calling function has done its work, or set-up code
we want to do first?</p>
<p>We can define a class that meets an appropriate protocol:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">verbose_context</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Get ready, &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OK, done&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">verbose_context</span><span class="p">(</span><span class="s2">&quot;Monty&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Doing it!&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Get ready,  Monty
Doing it!
OK, done
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>However, this is pretty verbose! Again, a generator with <code>yield</code> makes for an easier syntax:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>

<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">verbose_context</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Get ready for action, &quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You did it&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">verbose_context</span><span class="p">(</span><span class="s2">&quot;Monty&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">shouty</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Doing it, </span><span class="si">{</span><span class="n">shouty</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Get ready for action,  Monty
Doing it, MONTY
You did it
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Again, we use <code>yield</code> to temporarily return from a function.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Decorators">Decorators<a class="anchor-link" href="#Decorators">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When doing functional programming, we may often want to define mutator
functions which take in one function and return a new function, such as our
derivative example earlier.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>


<span class="k">def</span> <span class="nf">repeater</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrap_function_in_repeat</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">_repeated</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="n">count</span>
            <span class="k">while</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="k">return</span> <span class="n">_repeated</span>
    <span class="k">return</span> <span class="n">wrap_function_in_repeat</span>


<span class="n">fiftytimes</span> <span class="o">=</span> <span class="n">repeater</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

<span class="n">fiftyroots</span> <span class="o">=</span> <span class="n">fiftytimes</span><span class="p">(</span><span class="n">sqrt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">fiftyroots</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>1.000000000000004
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It turns out that, quite often, we want to apply one of these to a function as we're defining a class.
For example, we may want to specify that after certain methods are called, data should always be stored:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Any function which accepts a function as its first argument and returns a function can be used as a <strong>decorator</strong> like this.</p>
<p>Much of Python's standard functionality is implemented as decorators: we've
seen @contextmanager, @classmethod and @attribute. The @contextmanager
metafunction, for example, takes in an iterator, and yields a class conforming
to the context manager protocol.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@repeater</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hello</span><span class="p">(</span><span class="s2">&quot;Cleese&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;Hello, Hello, Hello, Cleese&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Supplementary-material">Supplementary material<a class="anchor-link" href="#Supplementary-material">&#182;</a></h2><p>The remainder of this page contains an example of the flexibility of the features discussed above. Specifically, it shows how generators and context managers can be combined to create a testing framework like the one previously seen in the course.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Test-generators">Test generators<a class="anchor-link" href="#Test-generators">&#182;</a></h3><p>A few weeks ago we saw a test which loaded its test cases from a YAML file and
asserted each input with each output. This was nice and concise, but had one
flaw: we had just one test, covering all the fixtures, so we got just one . in
the test output when we ran the tests, and if any test failed, the rest were
not run. We can do a nicer job with a test <strong>generator</strong>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">assert_exemplar</span><span class="p">(</span><span class="o">**</span><span class="n">fixture</span><span class="p">):</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="n">fixture</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;answer&#39;</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">greet</span><span class="p">(</span><span class="o">**</span><span class="n">fixture</span><span class="p">),</span> <span class="n">answer</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_greeter</span><span class="p">():</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="vm">__file__</span><span class="p">),</span> <span class="s1">&#39;fixtures&#39;</span><span class="p">,</span> <span class="s1">&#39;samples.yaml&#39;</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">fixtures_file</span><span class="p">:</span>
        <span class="n">fixtures</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fixtures_file</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">fixture</span> <span class="ow">in</span> <span class="n">fixtures</span><span class="p">:</span>

            <span class="k">yield</span> <span class="n">assert_exemplar</span><span class="p">(</span><span class="o">**</span><span class="n">fixture</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each time a function beginning with <code>test_</code> does a <code>yield</code> it results in another test.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Negative-test-contexts-managers">Negative test contexts managers<a class="anchor-link" href="#Negative-test-contexts-managers">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have seen this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pytest</span> <span class="kn">import</span> <span class="n">raises</span>

<span class="k">with</span> <span class="n">raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">x</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can now see how <code>pytest</code> might have implemented this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>


<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">reimplement_raises</span><span class="p">(</span><span class="n">exception</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">except</span> <span class="n">exception</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected,&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="p">,</span>
                        <span class="s2">&quot; to be raised, nothing was.&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">reimplement_raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">x</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Negative-test-decorators">Negative test decorators<a class="anchor-link" href="#Negative-test-decorators">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some frameworks, like <code>nose</code>, also implement a very nice negative test decorator, which lets us marks tests that we know should produce an exception:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">nose</span>


<span class="nd">@nose</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_raises_type_error</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;This test passes&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_raises_type_error</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@nose</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_that_fails_by_passing</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_that_fails_by_passing</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AssertionError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-48-627706dd82d1&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>test_that_fails_by_passing<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/virtualenv/python3.8.1/lib/python3.8/site-packages/nose/tools/nontrivial.py</span> in <span class="ansi-cyan-fg">newfunc</span><span class="ansi-blue-fg">(*arg, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">     65</span>             <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     66</span>                 message <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#34;%s() did not raise %s&#34;</span> <span class="ansi-blue-fg">%</span> <span class="ansi-blue-fg">(</span>name<span class="ansi-blue-fg">,</span> valid<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 67</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">raise</span> AssertionError<span class="ansi-blue-fg">(</span>message<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     68</span>         newfunc <span class="ansi-blue-fg">=</span> make_decorator<span class="ansi-blue-fg">(</span>func<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">(</span>newfunc<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     69</span>         <span class="ansi-green-fg">return</span> newfunc

<span class="ansi-red-fg">AssertionError</span>: test_that_fails_by_passing() did not raise Exception</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We could reimplement this ourselves now too, using the context manager we wrote above:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">homemade_raises_decorator</span><span class="p">(</span><span class="n">exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrap_function</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>  <span class="c1"># Closure over exception</span>
        <span class="c1"># Define a function which runs another function under our &quot;raises&quot; context:</span>
        <span class="k">def</span> <span class="nf">_output</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>  <span class="c1"># Closure over func and exception</span>
            <span class="k">with</span> <span class="n">reimplement_raises</span><span class="p">(</span><span class="n">exception</span><span class="p">):</span>
                <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># Return it</span>
        <span class="k">return</span> <span class="n">_output</span>
    <span class="k">return</span> <span class="n">wrap_function</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@homemade_raises_decorator</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_raises_type_error</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;This test passes&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_raises_type_error</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
 




        </div>

      </div>
    </div>

  </div>
  <!-- end .site-content -->

  <footer class="footer wrapper">
  <div class="footer__inner clearfix">
        <article class="block block--col-1">

          <h2 class="as-h5"><a href="https://www.turing.ac.uk">The Alan Turing Institute</a></h2>

          <ul class="footer__list list-unstyled">
          <li class="footer__item"><a href="https://www.turing.ac.uk/transparency-notice">Transparency notice</a></li>
          <li class="footer__item"><a href="https://www.turing.ac.uk/research/research-engineering">Contact the Research Engineering Group</a></li>

          </ul>
      </article>
  </div>
</footer>


  <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
  <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

</body>

</html>

